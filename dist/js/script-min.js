"use strict";let services=document.querySelector(".calculator-services"),slider=document.querySelector("#volume"),slider_min=document.querySelector(".calculator-slider__value--min"),slider_max=document.querySelector(".calculator-slider__value--max"),slider_value=document.querySelector(".slider-value"),intres_value=document.querySelector(".intres-value"),contract_value=document.querySelector(".contract-value"),contract_free=document.querySelector(".contract-fee"),contract_period=document.querySelector(".contract-period"),period_select=document.querySelector("#period"),monthly_payment=document.querySelector(".monthly-payment");async function getResponse(){let e=await fetch("../data.json"),t=await e.json();for(let e in t)for(let r in t[e]){let n=document.createElement("label"),l=document.createElement("input"),c=document.createElement("span");l.setAttribute("type","checkbox"),n.classList.add("service-item"),c.classList.add("checkmark"),n.innerHTML=t[e][r].name,services.append(n),n.append(l),n.append(c),l.addEventListener("change",function(){if(l.checked){let c=document.querySelectorAll("input[type=checkbox]");for(let e of c)e.checked=!1,e.parentElement.style.background="white";if(l.checked=!0,l.parentElement.style.background="#f7fafa",this.parentElement.textContent===t[e][r].name){function n(){let n=0;for(let l in t[e][r].intres){n++;let c=Number(slider.value);slider_value.innerHTML=c;let i=l.split("-")[0],a=l.split("-")[1];if(c>i&&c<a){intres_value.innerHTML=t[e][r].intres[l],contract_value.innerHTML=t[e][r].contract_fee[n-1]+" €",contract_free.innerHTML=t[e][r].monthly_fee[n-1]+" €";let c=(t[e][r].default_value*t[e][r].intres[l].split("%")[0]/100+t[e][r].default_value)/t[e][r].default_period,i=t[e][r].contract_fee[n-1]/t[e][r].default_period,a=t[e][r].monthly_fee[n-1];monthly_payment.innerHTML=(c+i+a).toFixed(2)+" €";let o=period_select.querySelectorAll("option");for(let e of o)e.remove();for(let l=1;l<=t[e][r].period[n-1]/6;l++){let n=document.createElement("option");n.innerHTML=6*l+" kuud",period_select.append(n),period_select.value=t[e][r].default_period+" kuud"}contract_period.innerHTML=t[e][r].default_period+" kuud"}}}slider.setAttribute("min",t[e][r].price_range[0]),slider.setAttribute("max",t[e][r].price_range[1]),slider_min.innerHTML=t[e][r].price_range[0]+" €",slider_max.innerHTML=t[e][r].price_range[1]+" €",slider.value=t[e][r].default_value,slider_value.innerHTML=t[e][r].default_value,n(),slider.addEventListener("change",function(){n()}),period_select.addEventListener("change",function(){contract_period.innerHTML=this.value})}}})}}getResponse();